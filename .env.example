# ============================================================================
# Figgy Environment Configuration
# ============================================================================
# Copy this file to .env and update the values for your environment
# All variables are validated by @figgy/config package

# ============================================================================
# CORE SYSTEM CONFIGURATION
# ============================================================================

# Environment (development, production, test)
NODE_ENV=development

# Logging level (error, warn, info, debug, etc.)
LOG_LEVEL=info

# Default application port
PORT=5000

# Host for services to bind to
HOST=localhost

# Base URL for the API server (REQUIRED for OAuth and webhooks)
# This is the public URL where your API is accessible
# - Development: http://localhost:5001 or your ngrok URL
# - Production: https://api.yourdomain.com
# Used for: Slack OAuth callbacks, WhatsApp webhooks, and other external integrations
BASE_URL=http://localhost:5001

# ============================================================================
# TRPC PERFORMANCE CONFIGURATION (Optional)
# ============================================================================

# Maximum number of metrics to keep in memory (default: 1000)
# TRPC_MAX_METRICS=1000

# Slow query threshold in milliseconds (default: 1000ms)
# TRPC_SLOW_QUERY_THRESHOLD=1000

# Performance stats logging interval in milliseconds (default: 300000ms = 5 minutes)
# Set to 0 to disable periodic logging
# TRPC_PERFORMANCE_LOG_INTERVAL=300000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string (REQUIRED)
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://postgres:password@localhost:5432/figgy_dev

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================

# Supabase project URL (REQUIRED)
# Get this from your Supabase project settings
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase anonymous key (REQUIRED)
# Get this from your Supabase project API settings
SUPABASE_ANON_KEY=your-anon-key-here

# Supabase service role key (OPTIONAL - for server-side operations)
# Only use this for server-side operations that need elevated permissions
SUPABASE_SERVICE_KEY=your-service-role-key-here

# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================

# JWT secret for token signing (REQUIRED - minimum 32 characters)
# Generate a secure random string for production
JWT_SECRET=development-jwt-secret-change-in-production-32-chars-minimum

# JWT token expiration (default: 7d in development, 1h in production)
JWT_EXPIRES_IN=7d

# JWT refresh token expiration (default: 30d in development, 7d in production)  
JWT_REFRESH_EXPIRES_IN=30d

# ============================================================================
# REDIS CONFIGURATION (OPTIONAL)
# ============================================================================

# Redis host (default: localhost)
REDIS_HOST=localhost

# Redis port (default: 6379)
REDIS_PORT=6379

# Redis username (optional)
REDIS_USER=

# Redis password (optional)
REDIS_PASSWORD=

# Enable TLS for Redis (default: false in development, true in production)
REDIS_TLS=false

# Redis database number (default: 0)
REDIS_DB=0

# Redis connection timeout in milliseconds (default: 5000)
REDIS_TIMEOUT=5000

# ============================================================================
# WEB APPLICATION CONFIGURATION
# ============================================================================

# Web application port (default: 4000)
WEB_PORT=4000

# API URL for the web application (default: http://localhost:5001)
API_URL=http://localhost:5001

# Public API URL for Nuxt (used in client-side code)
# Should match BASE_URL in most cases
NUXT_PUBLIC_API_URL=http://localhost:5001

# Enable development mode features (default: true in development)
DEV_MODE=true

# ============================================================================
# BROWSER EXTENSION CONFIGURATION
# ============================================================================

# Browser extension environment variables (VITE_ prefix required for client-side)
VITE_SUPABASE_URL=${SUPABASE_URL}
VITE_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
VITE_API_URL=http://localhost:3006
VITE_APP_URL=http://localhost:3000

# ============================================================================
# TRIGGER.DEV CONFIGURATION (REQUIRED FOR BACKGROUND JOBS)
# ============================================================================

# Trigger.dev project ID (get from Trigger.dev dashboard)
TRIGGER_PROJECT_ID=

# Trigger.dev API key (get from Trigger.dev dashboard)
TRIGGER_API_KEY=

# Trigger.dev API URL (default: https://api.trigger.dev)
TRIGGER_API_URL=https://api.trigger.dev

# ============================================================================
# COMMUNICATION CONFIGURATION
# ============================================================================

# WhatsApp/Twilio Configuration
# -----------------------------

# Twilio Account SID (get from Twilio console)
TWILIO_ACCOUNT_SID=

# Twilio Auth Token (get from Twilio console)
TWILIO_AUTH_TOKEN=

# WhatsApp-enabled Twilio phone number (E.164 format: +1234567890)
TWILIO_WHATSAPP_NUMBER=

# WhatsApp webhook verification token (default: figgy-whatsapp-verify)
WHATSAPP_VERIFY_TOKEN=figgy-whatsapp-verify

# Slack Configuration
# -------------------

# Slack App ID (get from Slack app settings)
SLACK_APP_ID=

# Slack Client ID (get from Slack app OAuth & Permissions)
SLACK_CLIENT_ID=

# Slack Client Secret (get from Slack app OAuth & Permissions)
SLACK_CLIENT_SECRET=

# Slack Signing Secret (get from Slack app Basic Information)
SLACK_SIGNING_SECRET=

# Note: Bot and user tokens are stored per workspace in the database
# after OAuth installation and not configured here

