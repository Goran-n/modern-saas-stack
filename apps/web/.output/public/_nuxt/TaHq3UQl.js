var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import __nuxt_component_2 from"./BPHwrUJ4.js";import{z as defineComponent,f as ref,y as watch,B as onUnmounted,E as computed,O as createElementBlock,a2 as createBaseVNode,X as createVNode,W as withCtx,G as unref,T as Transition,P as openBlock,a3 as toDisplayString,a5 as createCommentVNode,L as Fragment,a8 as renderList,U as normalizeClass,V as createBlock}from"./BRSJK7Xo.js";import{c as useSupabaseClient,a as useSupabaseUser,b as useRouter}from"./BGn8T2aB.js";import{_ as _sfc_main$1}from"./B9JvnBI9.js";const _hoisted_1=["aria-label"],_hoisted_2={class:"text-xs font-medium"},_hoisted_3={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 divide-y divide-gray-100 z-50"},_hoisted_4={class:"px-3 py-3"},_hoisted_5={class:"text-sm font-medium text-gray-900"},_hoisted_6={class:"py-1"},_hoisted_7=["onClick","disabled"],_hoisted_8={class:"flex-1"},_hoisted_9={key:1,class:"text-xs text-gray-400"},_sfc_main=defineComponent({__name:"UserDropdown",setup(__props){const supabase=useSupabaseClient(),user=useSupabaseUser(),router=useRouter(),isOpen=ref(!1),dropdownRef=ref(),handleClickOutside=__name(event=>{dropdownRef.value&&!dropdownRef.value.contains(event.target)&&(isOpen.value=!1)},"handleClickOutside");watch(isOpen,newValue=>{newValue?document.addEventListener("click",handleClickOutside,!0):document.removeEventListener("click",handleClickOutside,!0)}),onUnmounted(()=>{document.removeEventListener("click",handleClickOutside,!0)});const userName=computed(()=>user.value?.user_metadata?.full_name?user.value.user_metadata.full_name:user.value?.email?.split("@")[0]||"User"),userInitials=computed(()=>userName.value.split(" ").map(part=>part[0]).join("").toUpperCase().slice(0,2)),items=computed(()=>[{label:"View account",icon:"heroicons:user-circle",click:__name(()=>router.push("/settings/account"),"click")},{label:"Settings",icon:"heroicons:cog-6-tooth",shortcuts:["âŒ˜",","],click:__name(()=>router.push("/settings"),"click")},{label:"Sign out",icon:"heroicons:arrow-left-on-rectangle",iconClass:"text-red-500",click:__name(async()=>{await supabase.auth.signOut(),await router.push("/auth/login")},"click")}]),handleItemClick=__name(item=>{item.click&&!item.disabled&&item.click(),isOpen.value=!1},"handleItemClick");return(_ctx,_cache)=>{const _component_Icon=__nuxt_component_2;return openBlock(),createElementBlock("div",{ref_key:"dropdownRef",ref:dropdownRef,class:"relative"},[createBaseVNode("button",{class:"relative p-1.5 rounded-lg hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500",onClick:_cache[0]||(_cache[0]=$event=>isOpen.value=!isOpen.value),"aria-label":`User menu for ${userName.value}`},[createVNode(unref(_sfc_main$1),{alt:unref(user)?.email||"User",size:"sm",class:"w-8 h-8"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_2,toDisplayString(userInitials.value),1)]),_:1},8,["alt"])],8,_hoisted_1),createVNode(Transition,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:withCtx(()=>[isOpen.value?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createBaseVNode("p",_hoisted_5,toDisplayString(unref(user)?.email||"Guest"),1),_cache[1]||(_cache[1]=createBaseVNode("p",{class:"text-xs text-gray-500 mt-1"}," Free Plan ",-1))]),createBaseVNode("div",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(items.value,item=>(openBlock(),createElementBlock("button",{key:item.label,onClick:__name($event=>handleItemClick(item),"onClick"),class:normalizeClass(["w-full px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors flex items-center gap-2",[item.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer",item.iconClass]]),disabled:item.disabled},[item.icon?(openBlock(),createBlock(_component_Icon,{key:0,name:item.icon,class:"w-4 h-4"},null,8,["name"])):createCommentVNode("",!0),createBaseVNode("span",_hoisted_8,toDisplayString(item.label),1),item.shortcuts?.length?(openBlock(),createElementBlock("span",_hoisted_9,toDisplayString(item.shortcuts.join(" ")),1)):createCommentVNode("",!0)],10,_hoisted_7))),128))])])):createCommentVNode("",!0)]),_:1})],512)}}}),UserDropdown=Object.assign(_sfc_main,{__name:"UserDropdown"});export{UserDropdown as default};
