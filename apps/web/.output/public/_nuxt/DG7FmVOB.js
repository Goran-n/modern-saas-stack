var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{_ as __nuxt_component_0}from"./BdI7D7Kq.js";import{z as defineComponent,f as ref,O as createElementBlock,a2 as createBaseVNode,X as createVNode,W as withCtx,G as unref,a6 as withModifiers,a7 as resolveComponent,P as openBlock,a4 as createTextVNode}from"./BRSJK7Xo.js";import{b as useRouter}from"./BGn8T2aB.js";import{_ as _sfc_main$3}from"./DIbFRL3M.js";import{_ as _sfc_main$1}from"./DGo9Esvu.js";import{o as object,s as string,_ as _sfc_main$2,Z as ZodError}from"./DNtYPSZT.js";import{u as useAuthStore}from"./BzzzcPO6.js";import{u as useNotifications}from"./BzjSxxHY.js";import"./LqpTdS2-.js";import"./B8R4opHw.js";import"./DOQLo0N3.js";const _hoisted_1={class:"mt-8 text-center"},_sfc_main=defineComponent({__name:"forgot-password",setup(__props){const authStore=useAuthStore(),{auth}=useNotifications(),router=useRouter(),schema=object({email:string().email("Invalid email address")}),state=ref({email:""}),isLoading=ref(!1),errors=ref({});function validateField(field){try{string().email("Invalid email address").parse(state.value[field]),delete errors.value[field]}catch(error){error instanceof ZodError&&(errors.value[field]=error.issues[0]?.message||"Invalid input")}}__name(validateField,"validateField");function validateForm(){errors.value={};try{return schema.parse(state.value),!0}catch(error){return error instanceof ZodError&&error.issues.forEach(issue=>{issue.path[0]&&(errors.value[issue.path[0].toString()]=issue.message)}),!1}}__name(validateForm,"validateForm");async function onSubmit(){if(!validateForm())return;const formData=state.value;try{isLoading.value=!0,await authStore.resetPassword(formData.email),auth.passwordResetSent(),setTimeout(()=>{router.push("/auth/login")},3e3)}catch(error){auth.passwordResetFailed(error instanceof Error?error.message:void 0)}finally{isLoading.value=!1}}return __name(onSubmit,"onSubmit"),(_ctx,_cache)=>{const _component_NuxtIcon=resolveComponent("NuxtIcon"),_component_NuxtLink=__nuxt_component_0;return openBlock(),createElementBlock("div",null,[_cache[4]||(_cache[4]=createBaseVNode("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Forgot your password? ",-1)),_cache[5]||(_cache[5]=createBaseVNode("p",{class:"text-gray-600 mb-8"}," No worries, we'll send you reset instructions. ",-1)),createBaseVNode("form",{onSubmit:withModifiers(onSubmit,["prevent"]),class:"space-y-4"},[createVNode(unref(_sfc_main$2),{label:"Email",error:unref(errors).email,required:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$1),{modelValue:unref(state).email,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>unref(state).email=$event),type:"email",placeholder:"Enter your email",size:"lg",autofocus:"",onBlur:_cache[1]||(_cache[1]=$event=>validateField("email"))},null,8,["modelValue"])]),_:1},8,["error"]),createVNode(unref(_sfc_main$3),{type:"submit",class:"w-full",size:"lg",loading:unref(isLoading)},{default:withCtx(()=>_cache[2]||(_cache[2]=[createTextVNode(" Send reset instructions ",-1)])),_:1,__:[2]},8,["loading"])],32),createBaseVNode("div",_hoisted_1,[createVNode(_component_NuxtLink,{to:"/auth/login",class:"text-sm text-primary-600 hover:text-primary-500 inline-flex items-center"},{default:withCtx(()=>[createVNode(_component_NuxtIcon,{name:"heroicons:arrow-left",class:"w-4 h-4 mr-1"}),_cache[3]||(_cache[3]=createTextVNode(" Back to sign in ",-1))]),_:1,__:[3]})])])}}});export{_sfc_main as default};
