var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import __nuxt_component_2 from"./BPHwrUJ4.js";import{z as defineComponent,f as ref,E as computed,y as watch,A as onMounted,C as nextTick,O as createElementBlock,a2 as createBaseVNode,U as normalizeClass,ah as withKeys,a6 as withModifiers,V as createBlock,a5 as createCommentVNode,X as createVNode,W as withCtx,G as unref,L as Fragment,a8 as renderList,P as openBlock,a4 as createTextVNode,a3 as toDisplayString,a7 as resolveComponent}from"./BRSJK7Xo.js";import"./BGn8T2aB.js";import{_ as _sfc_main$1}from"./CEfzLdwR.js";import{_ as _sfc_main$2}from"./DqfWNI9s.js";import"./B8R4opHw.js";const _hoisted_1={class:"p-4 space-y-4 flex-1 overflow-y-auto"},_hoisted_2={class:"space-y-2"},_hoisted_3={class:"flex items-center gap-2"},_hoisted_4={class:"flex items-center gap-2"},_hoisted_5={class:"space-y-2"},_hoisted_6={key:0,class:"space-y-2"},_hoisted_7={key:1,class:"space-y-1"},_hoisted_8=["data-year","onClick","onKeydown"],_hoisted_9={class:"flex items-center gap-2"},_hoisted_10={class:"text-sm font-medium"},_hoisted_11={key:2,class:"text-center py-6 text-neutral-500"},_sfc_main=defineComponent({__name:"FileManagerSidebar",props:{fileData:{default:void 0},processingFiles:{},failedFiles:{},selectedYear:{},selectedSupplier:{},selectedStatus:{default:null},loading:{type:Boolean,default:!1}},setup(__props,{emit:__emit}){const props=__props,emit=__emit,currentFocusIndex=ref(0),focusableElements=ref([]),processingButton=ref(),failedButton=ref(),years=computed(()=>props.fileData?Object.keys(props.fileData.byYear).sort((a,b)=>b.localeCompare(a)):[]),selectYear=__name(year=>{emit("year-selected",year)},"selectYear"),getYearFileCount=__name(year=>props.fileData?.byYear[year]?props.fileData.byYear[year].totalFiles:0,"getYearFileCount"),isCurrentYear=__name(year=>{const currentYear=new Date().getFullYear().toString();return year===currentYear},"isCurrentYear"),updateFocusableElements=__name(()=>{const elements=[];processingButton.value&&elements.push(processingButton.value),failedButton.value&&elements.push(failedButton.value),years.value.forEach(year=>{const yearBtn=document.querySelector(`[data-year="${year}"]`);yearBtn&&elements.push(yearBtn)}),focusableElements.value=elements},"updateFocusableElements"),handleKeydown=__name(event=>{if(["ArrowDown","ArrowUp","Home","End"].includes(event.key)){switch(event.preventDefault(),updateFocusableElements(),event.key){case"ArrowDown":currentFocusIndex.value=Math.min(currentFocusIndex.value+1,focusableElements.value.length-1);break;case"ArrowUp":currentFocusIndex.value=Math.max(currentFocusIndex.value-1,0);break;case"Home":currentFocusIndex.value=0;break;case"End":currentFocusIndex.value=focusableElements.value.length-1;break}focusableElements.value[currentFocusIndex.value]?.focus()}},"handleKeydown");return watch(()=>props.selectedYear,()=>{nextTick(updateFocusableElements)},{immediate:!0}),onMounted(()=>{nextTick(updateFocusableElements)}),(_ctx,_cache)=>{const _component_Icon=__nuxt_component_2,_component_FigIcon=resolveComponent("FigIcon");return openBlock(),createElementBlock("div",{class:"h-full flex flex-col",onKeydown:handleKeydown,tabindex:"0"},[_cache[13]||(_cache[13]=createBaseVNode("div",{class:"flex items-center justify-between p-4 border-b border-neutral-200 flex-shrink-0"},[createBaseVNode("h2",{class:"text-base font-semibold text-neutral-900"},"Files")],-1)),createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[_cache[8]||(_cache[8]=createBaseVNode("h3",{class:"text-xs font-medium text-neutral-500 uppercase tracking-wide"}," Status ",-1)),createBaseVNode("button",{ref_key:"processingButton",ref:processingButton,onClick:_cache[0]||(_cache[0]=$event=>_ctx.$emit("status-selected","processing")),onKeydown:[_cache[1]||(_cache[1]=withKeys(withModifiers($event=>_ctx.$emit("status-selected","processing"),["prevent"]),["enter"])),_cache[2]||(_cache[2]=withKeys(withModifiers($event=>_ctx.$emit("status-selected","processing"),["prevent"]),["space"]))],class:normalizeClass(["w-full flex items-center justify-between p-2 text-left rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer",[_ctx.selectedYear===null&&_ctx.selectedSupplier===null&&_ctx.selectedStatus==="processing"?"bg-primary-100 text-primary-800 border border-primary-300 shadow-sm":"text-neutral-700 hover:bg-neutral-100 border border-transparent"]])},[createBaseVNode("div",_hoisted_3,[createVNode(_component_Icon,{name:"heroicons:clock",class:"w-4 h-4"}),_cache[6]||(_cache[6]=createBaseVNode("span",{class:"text-sm"},"Processing",-1))]),_ctx.processingFiles.length>0?(openBlock(),createBlock(unref(_sfc_main$1),{key:0,color:"info",variant:"soft",size:"xs"},{default:withCtx(()=>[createTextVNode(toDisplayString(_ctx.processingFiles.length),1)]),_:1})):createCommentVNode("",!0)],34),createBaseVNode("button",{ref_key:"failedButton",ref:failedButton,onClick:_cache[3]||(_cache[3]=$event=>_ctx.$emit("status-selected","failed")),onKeydown:[_cache[4]||(_cache[4]=withKeys(withModifiers($event=>_ctx.$emit("status-selected","failed"),["prevent"]),["enter"])),_cache[5]||(_cache[5]=withKeys(withModifiers($event=>_ctx.$emit("status-selected","failed"),["prevent"]),["space"]))],class:normalizeClass(["w-full flex items-center justify-between p-2 text-left rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer",[_ctx.selectedYear===null&&_ctx.selectedSupplier===null&&_ctx.selectedStatus==="failed"?"bg-error-100 text-error-800 border border-error-300 shadow-sm":"text-neutral-700 hover:bg-neutral-100 border border-transparent"]])},[createBaseVNode("div",_hoisted_4,[createVNode(_component_Icon,{name:"heroicons:exclamation-triangle",class:"w-4 h-4"}),_cache[7]||(_cache[7]=createBaseVNode("span",{class:"text-sm"},"Failed",-1))]),_ctx.failedFiles.length>0?(openBlock(),createBlock(unref(_sfc_main$1),{key:0,color:"error",variant:"soft",size:"xs"},{default:withCtx(()=>[createTextVNode(toDisplayString(_ctx.failedFiles.length),1)]),_:1})):createCommentVNode("",!0)],34)]),_cache[12]||(_cache[12]=createBaseVNode("div",{class:"border-t border-neutral-200"},null,-1)),createBaseVNode("div",_hoisted_5,[_cache[11]||(_cache[11]=createBaseVNode("h3",{class:"text-xs font-medium text-neutral-500 uppercase tracking-wide"}," Browse by Year ",-1)),_ctx.loading?(openBlock(),createElementBlock("div",_hoisted_6,[(openBlock(),createElementBlock(Fragment,null,renderList(3,i=>createVNode(unref(_sfc_main$2),{class:"h-8 w-full rounded-md",key:i})),64))])):years.value.length>0?(openBlock(),createElementBlock("div",_hoisted_7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(years.value,year=>(openBlock(),createElementBlock("button",{key:year,"data-year":year,onClick:__name($event=>selectYear(year),"onClick"),onKeydown:[withKeys(withModifiers($event=>selectYear(year),["prevent"]),["enter"]),withKeys(withModifiers($event=>selectYear(year),["prevent"]),["space"])],class:normalizeClass(["w-full flex items-center justify-between p-2 text-left rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer",[_ctx.selectedYear===year?"bg-primary-100 text-primary-800 border border-primary-300 shadow-sm":"text-neutral-700 hover:bg-neutral-100 border border-transparent"]])},[createBaseVNode("div",_hoisted_9,[createVNode(_component_FigIcon,{name:"i-heroicons-calendar-days",class:"text-sm text-neutral-600"}),createBaseVNode("span",_hoisted_10,toDisplayString(year),1),isCurrentYear(year)?(openBlock(),createBlock(unref(_sfc_main$1),{key:0,color:"primary",variant:"soft",size:"xs",class:"ml-1"},{default:withCtx(()=>_cache[9]||(_cache[9]=[createTextVNode(" Current ",-1)])),_:1,__:[9]})):createCommentVNode("",!0)]),getYearFileCount(year)>0?(openBlock(),createBlock(unref(_sfc_main$1),{key:0,color:"neutral",variant:"soft",size:"xs"},{default:withCtx(()=>[createTextVNode(toDisplayString(getYearFileCount(year)),1)]),_:2},1024)):createCommentVNode("",!0)],42,_hoisted_8))),128))])):(openBlock(),createElementBlock("div",_hoisted_11,[createVNode(_component_FigIcon,{name:"i-heroicons-folder-open",class:"text-2xl mb-2 text-neutral-400"}),_cache[10]||(_cache[10]=createBaseVNode("p",{class:"text-xs font-medium"},"No files uploaded yet",-1))]))])])],32)}}}),__nuxt_component_0=Object.assign(_sfc_main,{__name:"FileManagerSidebar"});export{__nuxt_component_0 as default};
