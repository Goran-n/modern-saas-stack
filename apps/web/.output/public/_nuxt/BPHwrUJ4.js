var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{R as useAppConfig,T as getIcon,U as loadIcon$1,j as useNuxtApp,V as addIcon,W as Icon}from"./BGn8T2aB.js";import{E as computed,z as defineComponent,y as watch,m as h}from"./BRSJK7Xo.js";const defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations});Object.freeze({...defaultIconProps,body:"",hidden:!1});function iconToHTML(body,attributes){let renderAttribsHTML=body.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const attr in attributes)renderAttribsHTML+=" "+attr+'="'+attributes[attr]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+renderAttribsHTML+">"+body+"</svg>"}__name(iconToHTML,"iconToHTML");const unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(size,ratio,precision){if(ratio===1)return size;if(precision=precision||100,typeof size=="number")return Math.ceil(size*ratio*precision)/precision;if(typeof size!="string")return size;const oldParts=size.split(unitsSplit);if(oldParts===null||!oldParts.length)return size;const newParts=[];let code=oldParts.shift(),isNumber=unitsTest.test(code);for(;;){if(isNumber){const num=parseFloat(code);isNaN(num)?newParts.push(code):newParts.push(Math.ceil(num*ratio*precision)/precision)}else newParts.push(code);if(code=oldParts.shift(),code===void 0)return newParts.join("");isNumber=!isNumber}}__name(calculateSize,"calculateSize");function encodeSVGforURL(svg){return svg.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}__name(encodeSVGforURL,"encodeSVGforURL");function svgToData(svg){return"data:image/svg+xml,"+encodeSVGforURL(svg)}__name(svgToData,"svgToData");function svgToURL(svg){return'url("'+svgToData(svg)+'")'}__name(svgToURL,"svgToURL");function makeViewBoxSquare(viewBox){const[left,top,width,height]=viewBox;if(width!==height){const max=Math.max(width,height);return[left-(max-width)/2,top-(max-height)/2,max,max]}return viewBox}__name(makeViewBoxSquare,"makeViewBoxSquare");const defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations});function splitSVGDefs(content,tag="defs"){let defs="";const index=content.indexOf("<"+tag);for(;index>=0;){const start=content.indexOf(">",index),end=content.indexOf("</"+tag);if(start===-1||end===-1)break;const endEnd=content.indexOf(">",end);if(endEnd===-1)break;defs+=content.slice(start+1,end).trim(),content=content.slice(0,index).trim()+content.slice(endEnd+1)}return{defs,content}}__name(splitSVGDefs,"splitSVGDefs");function mergeDefsAndContent(defs,content){return defs?"<defs>"+defs+"</defs>"+content:content}__name(mergeDefsAndContent,"mergeDefsAndContent");function wrapSVGContent(body,start,end){const split=splitSVGDefs(body);return mergeDefsAndContent(split.defs,start+split.content+end)}__name(wrapSVGContent,"wrapSVGContent");const isUnsetKeyword=__name(value=>value==="unset"||value==="undefined"||value==="none","isUnsetKeyword");function iconToSVG(icon,customisations){const fullIcon={...defaultIconProps,...icon},fullCustomisations={...defaultIconCustomisations,...customisations},box={left:fullIcon.left,top:fullIcon.top,width:fullIcon.width,height:fullIcon.height};let body=fullIcon.body;[fullIcon,fullCustomisations].forEach(props=>{const transformations=[],hFlip=props.hFlip,vFlip=props.vFlip;let rotation=props.rotate;hFlip?vFlip?rotation+=2:(transformations.push("translate("+(box.width+box.left).toString()+" "+(0-box.top).toString()+")"),transformations.push("scale(-1 1)"),box.top=box.left=0):vFlip&&(transformations.push("translate("+(0-box.left).toString()+" "+(box.height+box.top).toString()+")"),transformations.push("scale(1 -1)"),box.top=box.left=0);let tempValue;switch(rotation<0&&(rotation-=Math.floor(rotation/4)*4),rotation=rotation%4,rotation){case 1:tempValue=box.height/2+box.top,transformations.unshift("rotate(90 "+tempValue.toString()+" "+tempValue.toString()+")");break;case 2:transformations.unshift("rotate(180 "+(box.width/2+box.left).toString()+" "+(box.height/2+box.top).toString()+")");break;case 3:tempValue=box.width/2+box.left,transformations.unshift("rotate(-90 "+tempValue.toString()+" "+tempValue.toString()+")");break}rotation%2===1&&(box.left!==box.top&&(tempValue=box.left,box.left=box.top,box.top=tempValue),box.width!==box.height&&(tempValue=box.width,box.width=box.height,box.height=tempValue)),transformations.length&&(body=wrapSVGContent(body,'<g transform="'+transformations.join(" ")+'">',"</g>"))});const customisationsWidth=fullCustomisations.width,customisationsHeight=fullCustomisations.height,boxWidth=box.width,boxHeight=box.height;let width,height;customisationsWidth===null?(height=customisationsHeight===null?"1em":customisationsHeight==="auto"?boxHeight:customisationsHeight,width=calculateSize(height,boxWidth/boxHeight)):(width=customisationsWidth==="auto"?boxWidth:customisationsWidth,height=customisationsHeight===null?calculateSize(width,boxHeight/boxWidth):customisationsHeight==="auto"?boxHeight:customisationsHeight);const attributes={},setAttr=__name((prop,value)=>{isUnsetKeyword(value)||(attributes[prop]=value.toString())},"setAttr");setAttr("width",width),setAttr("height",height);const viewBox=[box.left,box.top,boxWidth,boxHeight];return attributes.viewBox=viewBox.join(" "),{attributes,viewBox,body}}__name(iconToSVG,"iconToSVG");function getCommonCSSRules(options){const result={display:"inline-block",width:"1em",height:"1em"},varName=options.varName;switch(options.pseudoSelector&&(result.content="''"),options.mode){case"background":varName&&(result["background-image"]="var(--"+varName+")"),result["background-repeat"]="no-repeat",result["background-size"]="100% 100%";break;case"mask":result["background-color"]="currentColor",varName&&(result["mask-image"]=result["-webkit-mask-image"]="var(--"+varName+")"),result["mask-repeat"]=result["-webkit-mask-repeat"]="no-repeat",result["mask-size"]=result["-webkit-mask-size"]="100% 100%";break}return result}__name(getCommonCSSRules,"getCommonCSSRules");function generateItemCSSRules(icon,options){const result={},varName=options.varName,buildResult=iconToSVG(icon);let viewBox=buildResult.viewBox;viewBox[2]!==viewBox[3]&&(options.forceSquare?viewBox=makeViewBoxSquare(viewBox):result.width=calculateSize("1em",viewBox[2]/viewBox[3]));const svg=iconToHTML(buildResult.body.replace(/currentColor/g,options.color||"black"),{viewBox:`${viewBox[0]} ${viewBox[1]} ${viewBox[2]} ${viewBox[3]}`,width:`${viewBox[2]}`,height:`${viewBox[3]}`}),url=svgToURL(svg);if(varName)result["--"+varName]=url;else switch(options.mode){case"background":result["background-image"]=url;break;case"mask":result["mask-image"]=result["-webkit-mask-image"]=url;break}return result}__name(generateItemCSSRules,"generateItemCSSRules");const format={selectorStart:{compressed:"{",compact:" {",expanded:" {"},selectorEnd:{compressed:"}",compact:`; }
`,expanded:`;
}
`},rule:{compressed:"{key}:",compact:" {key}: ",expanded:`
  {key}: `}};function formatCSS(data,mode="expanded"){const results=[];for(let i=0;i<data.length;i++){const{selector,rules}=data[i];let entry=(selector instanceof Array?selector.join(mode==="compressed"?",":", "):selector)+format.selectorStart[mode],firstRule=!0;for(const key in rules)firstRule||(entry+=";"),entry+=format.rule[mode].replace("{key}",key)+rules[key],firstRule=!1;entry+=format.selectorEnd[mode],results.push(entry)}return results.join(mode==="compressed"?"":`
`)}__name(formatCSS,"formatCSS");function getIconCSS(icon,options={}){const body=options.customise?options.customise(icon.body):icon.body,mode=options.mode||(options.color||!body.includes("currentColor")?"background":"mask");let varName=options.varName;varName===void 0&&mode==="mask"&&(varName="svg");const newOptions={...options,mode,varName};mode==="background"&&delete newOptions.varName;const rules={...options.rules,...getCommonCSSRules(newOptions),...generateItemCSSRules({...defaultIconProps,...icon,body},newOptions)},selector=options.iconSelector||".icon";return formatCSS([{selector,rules}],newOptions.format)}__name(getIconCSS,"getIconCSS");async function loadIcon(name,timeout){if(!name)return null;const _icon=getIcon(name);return _icon||(await loadIcon$1(name).catch(()=>(console.warn(`[Icon] failed to load icon \`${name}\``),null)),getIcon(name))}__name(loadIcon,"loadIcon");function useResolvedName(getName){const options=useAppConfig().icon,collections=(options.collections||[]).sort((a,b)=>b.length-a.length);return computed(()=>{const name=getName(),bare=name.startsWith(options.cssSelectorPrefix)?name.slice(options.cssSelectorPrefix.length):name,resolved=options.aliases?.[bare]||bare;if(!resolved.includes(":")){const collection=collections.find(c=>resolved.startsWith(c+"-"));return collection?collection+":"+resolved.slice(collection.length+1):resolved}return resolved})}__name(useResolvedName,"useResolvedName");function resolveCustomizeFn(customize,globalCustomize){if(customize!==!1)return customize===!0||customize===null?globalCustomize:customize}__name(resolveCustomizeFn,"resolveCustomizeFn");let cssSelectors;function escapeCssSelector(selector){return selector.replace(/([^\w-])/g,"\\$1")}__name(escapeCssSelector,"escapeCssSelector");function getAllSelectors(){if(cssSelectors)return cssSelectors;cssSelectors=new Set;const filter=__name(selector=>{if(selector=selector.replace(/^:where\((.*)\)$/,"$1").trim(),selector.startsWith("."))return selector},"filter"),scanCssRules=__name(rules=>{if(rules?.length)for(const rule of rules){rule?.cssRules&&scanCssRules(rule.cssRules);const selectorRaw=rule?.selectorText;if(typeof selectorRaw=="string"){const selector=filter(selectorRaw);selector&&cssSelectors.add(selector)}}},"scanCssRules");if(typeof document<"u")for(const styleSheet of document.styleSheets)try{const rules=styleSheet.cssRules||styleSheet.rules;scanCssRules(rules)}catch{}return cssSelectors}__name(getAllSelectors,"getAllSelectors");const NuxtIconCss=defineComponent({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(props){const nuxt=useNuxtApp(),options=useAppConfig().icon,cssClass=computed(()=>props.name?options.cssSelectorPrefix+props.name:"");function getIcon$1(name){if(!name)return;const icon=getIcon(name);if(icon)return icon;const payload=nuxt.payload?.data?.[name];if(payload)return addIcon(name,payload),payload}__name(getIcon$1,"getIcon$1");const selector=computed(()=>"."+escapeCssSelector(cssClass.value));function getCSS(icon,withLayer=!0){let iconSelector=selector.value;options.cssWherePseudo&&(iconSelector=`:where(${iconSelector})`);const css=getIconCSS(icon,{iconSelector,format:"compressed",customise:resolveCustomizeFn(props.customize,options.customize)});return options.cssLayer&&withLayer?`@layer ${options.cssLayer} { ${css} }`:css}__name(getCSS,"getCSS");{const selectors=getAllSelectors();async function mountCSS(icon){if(selectors.has(selector.value)||typeof document>"u")return;const style=document.createElement("style");style.textContent=getCSS(icon);const firstStyle=document.head.querySelector('style, link[rel="stylesheet"]');firstStyle?document.head.insertBefore(style,firstStyle):document.head.appendChild(style),selectors.add(selector.value)}__name(mountCSS,"mountCSS"),watch(()=>props.name,()=>{if(selectors.has(selector.value))return;const data=getIcon$1(props.name);data?mountCSS(data):loadIcon(props.name).then(data2=>{data2&&mountCSS(data2)}).catch(()=>null)},{immediate:!0})}return()=>h("span",{class:["iconify",cssClass.value]})}}),NuxtIconSvg=defineComponent({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(props,{slots}){const nuxt=useNuxtApp(),options=useAppConfig().icon,name=useResolvedName(()=>props.name),storeKey="i-"+name.value;if(name.value){const payload=nuxt.payload.data[storeKey];payload&&addIcon(name.value,payload)}return()=>h(Icon,{icon:name.value,ssr:!0,customise:resolveCustomizeFn(props.customize,options.customize)},slots)}}),__nuxt_component_2=defineComponent({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(props,{slots}){const nuxtApp=useNuxtApp(),runtimeOptions=useAppConfig().icon,name=useResolvedName(()=>props.name),component=computed(()=>nuxtApp.vueApp?.component(name.value)||((props.mode||runtimeOptions.mode)==="svg"?NuxtIconSvg:NuxtIconCss)),style=computed(()=>{const size=props.size||runtimeOptions.size;return size?{fontSize:Number.isNaN(+size)?size:size+"px"}:null});return()=>h(component.value,{...runtimeOptions.attrs,name:name.value,class:runtimeOptions.class,style:style.value,customize:props.customize},slots)}});export{__nuxt_component_2 as default};
