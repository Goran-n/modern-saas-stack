var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{_ as __nuxt_component_0}from"./BdI7D7Kq.js";import{z as defineComponent,f as ref,O as createElementBlock,a2 as createBaseVNode,X as createVNode,W as withCtx,G as unref,a6 as withModifiers,a4 as createTextVNode,a7 as resolveComponent,P as openBlock}from"./BRSJK7Xo.js";import{b as useRouter}from"./BGn8T2aB.js";import{_ as _sfc_main$4}from"./DIbFRL3M.js";import{_ as _sfc_main$3,a as _sfc_main$5}from"./HBRHWuMW.js";import{_ as _sfc_main$1}from"./DGo9Esvu.js";import{o as object,b as boolean,s as string,_ as _sfc_main$2,Z as ZodError}from"./DNtYPSZT.js";import{u as useAuthStore}from"./BzzzcPO6.js";import{u as useNotifications}from"./BzjSxxHY.js";import"./LqpTdS2-.js";import"./B8R4opHw.js";import"./DOQLo0N3.js";const _hoisted_1={class:"space-y-6"},_hoisted_2={class:"text-center text-sm text-slate-500"},_sfc_main=defineComponent({__name:"signup",setup(__props){const authStore=useAuthStore(),{auth,general}=useNotifications(),router=useRouter(),isLoading=ref(!1),errors=ref({}),schema=object({email:string().email("Invalid email address"),password:string().min(8,"Password must be at least 8 characters"),confirmPassword:string(),terms:boolean()}).refine(data=>data.password===data.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(data=>data.terms,{message:"You must accept the terms and conditions",path:["terms"]}),state=ref({email:"",password:"",confirmPassword:"",terms:!1});function validateField(field){try{if(field==="confirmPassword"&&state.value.password!==state.value.confirmPassword){errors.value.confirmPassword="Passwords don't match";return}if({email:string().email("Invalid email address"),password:string().min(8,"Password must be at least 8 characters"),confirmPassword:string(),terms:boolean()}[field].parse(state.value[field]),field==="terms"&&!state.value.terms){errors.value.terms="You must accept the terms and conditions";return}delete errors.value[field]}catch(error){error instanceof ZodError&&(errors.value[field]=error.issues[0]?.message||"Invalid input")}}__name(validateField,"validateField");function validateForm(){errors.value={};try{return schema.parse(state.value),!0}catch(error){return error instanceof ZodError&&error.issues.forEach(issue=>{issue.path[0]&&(errors.value[issue.path[0].toString()]=issue.message)}),!1}}__name(validateForm,"validateForm");async function onSubmit(){if(!validateForm())return;const formData=state.value;try{isLoading.value=!0,await authStore.signUp(formData.email,formData.password),auth.signUpSuccess(),await router.push("/auth/login")}catch(error){auth.signUpFailed(error instanceof Error?error.message:void 0)}finally{isLoading.value=!1}}__name(onSubmit,"onSubmit");async function signUpWithProvider(){try{general.comingSoon("Google sign-up")}catch(error){general.error("Error",error instanceof Error?error.message:void 0)}}return __name(signUpWithProvider,"signUpWithProvider"),(_ctx,_cache)=>{const _component_NuxtIcon=resolveComponent("NuxtIcon"),_component_NuxtLink=__nuxt_component_0;return openBlock(),createElementBlock("div",_hoisted_1,[_cache[11]||(_cache[11]=createBaseVNode("div",{class:"text-center"},[createBaseVNode("h1",{class:"text-2xl font-semibold text-slate-900"}," Create your account "),createBaseVNode("p",{class:"mt-2 text-sm text-slate-600"}," Get started with your free account ")],-1)),createBaseVNode("form",{onSubmit:withModifiers(onSubmit,["prevent"]),class:"space-y-4"},[createVNode(unref(_sfc_main$2),{label:"Email",error:unref(errors).email,required:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$1),{modelValue:unref(state).email,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>unref(state).email=$event),type:"email",placeholder:"Enter your email",size:"lg",autofocus:"",onBlur:_cache[1]||(_cache[1]=$event=>validateField("email"))},null,8,["modelValue"])]),_:1},8,["error"]),createVNode(unref(_sfc_main$2),{label:"Password",error:unref(errors).password,required:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$1),{modelValue:unref(state).password,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>unref(state).password=$event),type:"password",placeholder:"Create a password",size:"lg",onBlur:_cache[3]||(_cache[3]=$event=>validateField("password"))},null,8,["modelValue"])]),_:1},8,["error"]),createVNode(unref(_sfc_main$2),{label:"Confirm Password",error:unref(errors).confirmPassword,required:""},{default:withCtx(()=>[createVNode(unref(_sfc_main$1),{modelValue:unref(state).confirmPassword,"onUpdate:modelValue":_cache[4]||(_cache[4]=$event=>unref(state).confirmPassword=$event),type:"password",placeholder:"Confirm your password",size:"lg",onBlur:_cache[5]||(_cache[5]=$event=>validateField("confirmPassword"))},null,8,["modelValue"])]),_:1},8,["error"]),createVNode(unref(_sfc_main$2),{error:unref(errors).terms},{default:withCtx(()=>[createVNode(unref(_sfc_main$3),{modelValue:unref(state).terms,"onUpdate:modelValue":_cache[6]||(_cache[6]=$event=>unref(state).terms=$event),label:"I agree to the Terms and Privacy Policy"},null,8,["modelValue"])]),_:1},8,["error"]),createVNode(unref(_sfc_main$4),{type:"submit",class:"w-full",size:"lg",loading:unref(isLoading)},{default:withCtx(()=>_cache[7]||(_cache[7]=[createTextVNode(" Create account ",-1)])),_:1,__:[7]},8,["loading"])],32),createVNode(unref(_sfc_main$5),{label:"or continue with",class:"my-6"}),createVNode(unref(_sfc_main$4),{class:"w-full",size:"lg",color:"neutral",variant:"outline",onClick:signUpWithProvider},{default:withCtx(()=>[createVNode(_component_NuxtIcon,{name:"simple-icons:google",class:"w-4 h-4 mr-2"}),_cache[8]||(_cache[8]=createTextVNode(" Continue with Google ",-1))]),_:1,__:[8]}),createBaseVNode("p",_hoisted_2,[_cache[10]||(_cache[10]=createTextVNode(" Already have an account? ",-1)),createVNode(_component_NuxtLink,{to:"/auth/login",class:"font-medium text-primary-600 hover:text-primary-700"},{default:withCtx(()=>_cache[9]||(_cache[9]=[createTextVNode(" Sign in ",-1)])),_:1,__:[9]})])])}}});export{_sfc_main as default};
