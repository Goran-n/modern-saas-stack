var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{y as watch,B as onUnmounted,z as defineComponent,al as useSlots,f as ref,E as computed,A as onMounted,V as createBlock,P as openBlock,ad as Teleport,X as createVNode,T as Transition,W as withCtx,O as createElementBlock,a5 as createCommentVNode,a2 as createBaseVNode,a6 as withModifiers,G as unref,U as normalizeClass,ai as useId,Q as renderSlot,a3 as toDisplayString,C as nextTick}from"./BRSJK7Xo.js";import{h as cn}from"./BGn8T2aB.js";import{_ as _sfc_main$1}from"./DIbFRL3M.js";function useBodyScrollLock(isLocked){let scrollPosition=0;const lockScroll=__name(()=>{scrollPosition=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${scrollPosition}px`,document.body.style.width="100%"},"lockScroll"),unlockScroll=__name(()=>{document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),window.scrollTo(0,scrollPosition)},"unlockScroll");return watch(isLocked,locked=>{locked?lockScroll():unlockScroll()},{immediate:!0}),onUnmounted(()=>{isLocked.value&&unlockScroll()}),{lockScroll,unlockScroll}}__name(useBodyScrollLock,"useBodyScrollLock");const _hoisted_1={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},_hoisted_2={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},_hoisted_3=["aria-labelledby","aria-describedby"],_hoisted_4={class:"flex-1"},_hoisted_5=["id"],_hoisted_6={key:1,class:"mt-1 text-sm text-primary-600"},_hoisted_7=["id"],_sfc_main=defineComponent({__name:"Modal",props:{modelValue:{type:Boolean},open:{type:Boolean},size:{default:"md"},title:{},description:{},closable:{type:Boolean,default:!0},closeOnBackdrop:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},padding:{type:Boolean,default:!0},class:{}},emits:["update:modelValue","update:open","close"],setup(__props,{emit:__emit}){const props=__props,emit=__emit,slots=useSlots(),modalRef=ref(),titleId=useId(),bodyId=useId(),close=__name(()=>{emit("update:modelValue",!1),emit("update:open",!1),emit("close")},"close"),handleBackdropClick=__name(()=>{props.closeOnBackdrop&&close()},"handleBackdropClick"),isOpen=computed(()=>props.modelValue??props.open??!1),handleEscape=__name(e=>{e.key==="Escape"&&props.closeOnEscape&&isOpen.value&&close()},"handleEscape"),lastFocusedElement=ref(null),getFocusableElements=__name(()=>{if(!modalRef.value)return[];const selectors=["a[href]","button:not([disabled])","textarea:not([disabled])",'input[type="text"]:not([disabled])','input[type="radio"]:not([disabled])','input[type="checkbox"]:not([disabled])',"select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");return Array.from(modalRef.value.querySelectorAll(selectors))},"getFocusableElements"),trapFocus=__name(e=>{if(e.key!=="Tab"||!isOpen.value)return;const elements=getFocusableElements();if(elements.length===0)return;const firstElement=elements[0],lastElement=elements[elements.length-1];e.shiftKey&&document.activeElement===firstElement?(e.preventDefault(),lastElement?.focus()):!e.shiftKey&&document.activeElement===lastElement&&(e.preventDefault(),firstElement?.focus())},"trapFocus");useBodyScrollLock(isOpen),watch(isOpen,async open=>{if(open){lastFocusedElement.value=document.activeElement,await nextTick();const elements=getFocusableElements();elements.length>0&&elements[0]?.focus(),document.addEventListener("keydown",trapFocus)}else document.removeEventListener("keydown",trapFocus),lastFocusedElement.value&&lastFocusedElement.value.focus()}),onMounted(()=>{props.closeOnEscape&&window.addEventListener("keydown",handleEscape)}),onUnmounted(()=>{props.closeOnEscape&&window.removeEventListener("keydown",handleEscape),document.removeEventListener("keydown",trapFocus),document.body.style.overflow=""});const modalClasses=computed(()=>cn(["relative transform overflow-hidden rounded-lg","bg-white","text-left shadow-xl transition-all","sm:my-8 w-full"],{xs:"sm:max-w-xs",sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","3xl":"sm:max-w-3xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl","6xl":"sm:max-w-6xl","7xl":"sm:max-w-7xl",full:"sm:max-w-full"}[props.size],props.class)),paddingClasses=props.padding?"px-4 py-5 sm:p-6":"",headerClasses=computed(()=>cn(["flex items-start justify-between","border-b border-primary-200"],paddingClasses)),bodyClasses=computed(()=>cn(paddingClasses)),footerClasses=computed(()=>cn(["flex items-center justify-end gap-3","border-t border-primary-200"],paddingClasses));return(_ctx,_cache)=>(openBlock(),createBlock(Teleport,{to:"body"},[createVNode(Transition,{"enter-active-class":"transition-opacity duration-150 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150 ease-out","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:withCtx(()=>[isOpen.value?(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{class:"fixed inset-0 bg-neutral-900/20 backdrop-blur-sm transition-opacity duration-150 ease-out",onClick:handleBackdropClick}),createBaseVNode("div",_hoisted_2,[createVNode(Transition,{"enter-active-class":"transition-all duration-150 ease-out","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition-all duration-150 ease-out","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:withCtx(()=>[isOpen.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"modalRef",ref:modalRef,class:normalizeClass(modalClasses.value),role:"dialog","aria-modal":"true","aria-labelledby":unref(titleId),"aria-describedby":unref(bodyId),onClick:_cache[0]||(_cache[0]=withModifiers(()=>{},["stop"]))},[unref(slots)?.header||_ctx.title||_ctx.description?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(headerClasses.value)},[renderSlot(_ctx.$slots,"header",{},()=>[createBaseVNode("div",_hoisted_4,[_ctx.title?(openBlock(),createElementBlock("h3",{key:0,id:unref(titleId),class:"text-lg font-semibold leading-6 text-primary-900"},toDisplayString(_ctx.title),9,_hoisted_5)):createCommentVNode("",!0),_ctx.description?(openBlock(),createElementBlock("p",_hoisted_6,toDisplayString(_ctx.description),1)):createCommentVNode("",!0)])]),_ctx.closable?(openBlock(),createBlock(unref(_sfc_main$1),{key:0,variant:"ghost",size:"sm",color:"neutral","aria-label":"Close",class:"p-1",onClick:close},{default:withCtx(()=>_cache[1]||(_cache[1]=[createBaseVNode("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[createBaseVNode("path",{d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})],-1)])),_:1,__:[1]})):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createBaseVNode("div",{id:unref(bodyId),class:normalizeClass(bodyClasses.value)},[renderSlot(_ctx.$slots,"body",{},()=>[renderSlot(_ctx.$slots,"default")])],10,_hoisted_7),unref(slots)?.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(footerClasses.value)},[renderSlot(_ctx.$slots,"footer",{close})],2)):createCommentVNode("",!0)],10,_hoisted_3)):createCommentVNode("",!0)]),_:3})])])):createCommentVNode("",!0)]),_:3})]))}});export{_sfc_main as _};
