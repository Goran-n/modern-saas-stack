var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import __nuxt_component_2 from"./BPHwrUJ4.js";import{d as useRoute,e as useTenantStore,n as navigateTo}from"./BGn8T2aB.js";import{u as useQuery}from"./BHHfj2p6.js";import{_ as _sfc_main$4}from"./hXgEKzhh.js";import{_ as _sfc_main$1}from"./rIxWFMco.js";import{_ as _sfc_main$6}from"./BeaoTUGu.js";import{_ as _sfc_main$3}from"./DqfWNI9s.js";import{_ as _sfc_main$2}from"./B8fQSm5j.js";import{_ as _sfc_main$5}from"./DOdfRuNH.js";import SupplierLogo from"./Dik3jxux.js";import{F as FileIcon}from"./ksLeJgyi.js";import FileSize from"./DGtf3NT_.js";import FileDate from"./kTO7q3pb.js";import{u as useApi}from"./Cw4ufSzG.js";import{z as defineComponent,E as computed,O as createElementBlock,X as createVNode,W as withCtx,G as unref,a7 as resolveComponent,P as openBlock,a4 as createTextVNode,a2 as createBaseVNode,a3 as toDisplayString,a5 as createCommentVNode,V as createBlock,L as Fragment,a8 as renderList}from"./BRSJK7Xo.js";import"./B8R4opHw.js";import"./DIbFRL3M.js";import"./LqpTdS2-.js";import"./CEfzLdwR.js";import"./zJvaikBT.js";import"./BD-eHdPR.js";import"./BzzzcPO6.js";import"./BzjSxxHY.js";import"./DOQLo0N3.js";const _hoisted_1={class:"min-h-screen bg-canvas"},_hoisted_2={key:0,class:"flex items-start gap-6"},_hoisted_3={class:"flex-1"},_hoisted_4={class:"flex items-start justify-between"},_hoisted_5={class:"text-2xl font-semibold text-neutral-900"},_hoisted_6={class:"text-neutral-600 mt-1"},_hoisted_7={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3"},_hoisted_8={key:0,class:"flex items-center gap-2 text-sm text-neutral-600"},_hoisted_9=["href"],_hoisted_10={key:1,class:"flex items-center gap-2 text-sm text-neutral-600"},_hoisted_11=["href"],_hoisted_12={key:1,class:"animate-pulse"},_hoisted_13={class:"flex items-start gap-6"},_hoisted_14={class:"flex-1 space-y-3"},_hoisted_15={key:0,class:"space-y-3"},_hoisted_16={key:2,class:"space-y-2"},_hoisted_17=["onClick"],_hoisted_18={class:"flex items-center gap-3"},_hoisted_19={class:"font-medium text-neutral-900"},_hoisted_20={class:"text-sm text-neutral-600"},_hoisted_21={class:"flex items-center gap-3"},_sfc_main=defineComponent({__name:"[id]",setup(__props){const route=useRoute(),api=useApi(),tenantStore=useTenantStore(),supplierId=route.params.id,selectedTenantId=computed(()=>tenantStore.selectedTenantId),{data:suppliers}=useQuery({queryKey:["suppliers",selectedTenantId],queryFn:__name(async()=>(await api.get("/trpc/suppliers.list")).result.data.json,"queryFn"),enabled:__name(()=>!!selectedTenantId.value,"enabled")}),supplier=computed(()=>suppliers.value?.find(s=>s.id===supplierId)),{data:files,isLoading:filesLoading,error:filesError}=useQuery({queryKey:["supplier-files",supplierId,selectedTenantId],queryFn:__name(async()=>{const input={json:{supplierId}};return(await api.get(`/trpc/suppliers.getFiles?input=${encodeURIComponent(JSON.stringify(input))}`)).result.data.json},"queryFn"),enabled:__name(()=>!!supplierId&&!!selectedTenantId.value,"enabled")});return(_ctx,_cache)=>{const _component_Icon=__nuxt_component_2,_component_RouterLink=resolveComponent("RouterLink");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(unref(_sfc_main$6),{"max-width":"6xl",class:"py-8"},{default:withCtx(()=>[createVNode(_component_RouterLink,{to:"/suppliers",class:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6 transition-colors"},{default:withCtx(()=>[createVNode(_component_Icon,{name:"heroicons:arrow-left",class:"h-5 w-5"}),_cache[0]||(_cache[0]=createTextVNode(" Back to suppliers ",-1))]),_:1,__:[0]}),createVNode(unref(_sfc_main$1),{class:"mb-8"},{default:withCtx(()=>[unref(supplier)?(openBlock(),createElementBlock("div",_hoisted_2,[createVNode(SupplierLogo,{name:unref(supplier).displayName||unref(supplier).legalName,"logo-url":unref(supplier).logoUrl,size:"xl"},null,8,["name","logo-url"]),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createBaseVNode("div",null,[createBaseVNode("h1",_hoisted_5,toDisplayString(unref(supplier).displayName||unref(supplier).legalName),1),createBaseVNode("p",_hoisted_6,toDisplayString(unref(supplier).companyNumber||"No company number"),1)]),createVNode(unref(_sfc_main$2),{status:unref(supplier).status,type:"connection",variant:"soft",size:"md"},null,8,["status"])]),createBaseVNode("div",_hoisted_7,[unref(supplier).email?(openBlock(),createElementBlock("div",_hoisted_8,[createVNode(_component_Icon,{name:"heroicons:envelope",class:"h-4 w-4"}),createBaseVNode("a",{href:`mailto:${unref(supplier).email}`,class:"hover:text-primary-600 transition-colors"},toDisplayString(unref(supplier).email),9,_hoisted_9)])):createCommentVNode("",!0),unref(supplier).phone?(openBlock(),createElementBlock("div",_hoisted_10,[createVNode(_component_Icon,{name:"heroicons:phone",class:"h-4 w-4"}),createBaseVNode("a",{href:`tel:${unref(supplier).phone}`,class:"hover:text-primary-600 transition-colors"},toDisplayString(unref(supplier).phone),9,_hoisted_11)])):createCommentVNode("",!0)])])])):(openBlock(),createElementBlock("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[createVNode(unref(_sfc_main$3),{class:"h-20 w-20 rounded-lg"}),createBaseVNode("div",_hoisted_14,[createVNode(unref(_sfc_main$3),{class:"h-8 w-64"}),createVNode(unref(_sfc_main$3),{class:"h-5 w-40"})])])]))]),_:1}),createVNode(unref(_sfc_main$1),null,{header:withCtx(()=>_cache[1]||(_cache[1]=[createBaseVNode("h2",{class:"text-lg font-semibold"},"Files",-1)])),default:withCtx(()=>[unref(filesLoading)?(openBlock(),createElementBlock("div",_hoisted_15,[(openBlock(),createElementBlock(Fragment,null,renderList(3,i=>createVNode(unref(_sfc_main$3),{key:i,class:"h-16 w-full rounded-lg"})),64))])):unref(filesError)?(openBlock(),createBlock(unref(_sfc_main$4),{key:1,variant:"solid",color:"error"},{title:withCtx(()=>_cache[2]||(_cache[2]=[createTextVNode("Error loading files",-1)])),default:withCtx(()=>[createTextVNode(" "+toDisplayString(unref(filesError)?.message||"An error occurred while loading files"),1)]),_:1})):unref(files)&&unref(files).length>0?(openBlock(),createElementBlock("div",_hoisted_16,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(files),file=>(openBlock(),createElementBlock("div",{key:file.id,class:"group flex items-center justify-between p-4 rounded-lg border border-neutral-200 hover:border-primary-300 hover:bg-primary-50 cursor-pointer transition-all",onClick:__name(()=>("navigateTo"in _ctx?_ctx.navigateTo:unref(navigateTo))(`/files/${file.id}`),"onClick")},[createBaseVNode("div",_hoisted_18,[createVNode(FileIcon,{"file-name":file.fileName,size:"md"},null,8,["file-name"]),createBaseVNode("div",null,[createBaseVNode("p",_hoisted_19,toDisplayString(file.fileName),1),createBaseVNode("p",_hoisted_20,[createVNode(FileSize,{bytes:file.size||0,size:"sm"},null,8,["bytes"])])])]),createBaseVNode("div",_hoisted_21,[createVNode(FileDate,{date:file.createdAt,size:"sm",class:"text-neutral-500"},null,8,["date"]),createVNode(_component_Icon,{name:"heroicons:chevron-right",class:"h-5 w-5 text-neutral-400 group-hover:text-primary-600 transition-colors"})])],8,_hoisted_17))),128))])):(openBlock(),createBlock(unref(_sfc_main$5),{key:3,type:"no-files",title:"No files found",description:"Files uploaded for this supplier will appear here"}))]),_:1})]),_:1})])}}});export{_sfc_main as default};
